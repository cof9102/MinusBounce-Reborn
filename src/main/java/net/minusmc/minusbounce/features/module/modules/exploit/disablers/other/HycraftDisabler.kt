package net.minusmc.minusbounce.features.module.modules.exploit.disablers.other

import net.minecraft.network.play.server.S08PacketPlayerPosLook
import net.minusmc.minusbounce.event.ReceivedPacketEvent
import net.minusmc.minusbounce.features.module.modules.exploit.disablers.DisablerMode
import net.minusmc.minusbounce.utils.ClientUtils
import net.minusmc.minusbounce.value.BoolValue

class HycraftDisabler : DisablerMode("Hycraft") {
    private val hycraftMoveFix = BoolValue("InvalidMoveFix", true)
    private val hycraftRotFix = BoolValue("InvaildRotationFix", true)

    override fun onEnable() {
        ClientUtils.displayChatMessage("§7[§3§lDisabler§7]§f Thanks to Cancelled for the funniest disabler.")
    }

    override fun onReceivedPacket(event: ReceivedPacketEvent) {
        val packet = event.packet
        if (packet !is S08PacketPlayerPosLook)
            return

        if (hycraftRotFix.get()) {
            if (packet.yaw > 180f || packet.yaw < -180f || packet.pitch < -410f || packet.pitch > 590f) {
                debug("keep trying high craft owner")
                event.isCancelled = true
            }
        }

        if (hycraftMoveFix.get()) {
            if (packet.x > 20000000f || packet.y > 20000000f || packet.z > 20000000f) {
                debug("move gone wrong")
                event.isCancelled = true
            }
        }
    }

}